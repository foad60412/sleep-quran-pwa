/* نجوم أوضح وكثيرة مع وميض */
body.bg-stars {
  /* تدرّج خفيف علوي */
  background:
    linear-gradient(to bottom, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.6) 50%, rgba(0,0,0,0.9) 100%),
    #000;
  position: relative;
  overflow: hidden;
}

/* ثلاث طبقات نجوم عبر عناصر وهمية */
body.bg-stars::before,
body.bg-stars::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-repeat: repeat;
  background-size: 700px 700px;             /* كثافة عالية */
  opacity: .9;
  z-index: 0;
}
/* طبقة نجوم كبيرة متوهّجة */
body.bg-stars::before{
  background-image:
    radial-gradient(2px 2px at 20px 30px, rgba(255,255,200,.95) 50%, transparent 52%),
    radial-gradient(1.5px 1.5px at 120px 80px, rgba(255,230,140,.9) 50%, transparent 52%),
    radial-gradient(1.8px 1.8px at 260px 160px, rgba(255,255,200,.95) 50%, transparent 52%),
    radial-gradient(1.3px 1.3px at 400px 260px, rgba(255,230,140,.9) 50%, transparent 52%),
    radial-gradient(2.2px 2.2px at 560px 340px, rgba(255,255,220,1) 50%, transparent 52%);
  animation: twinkleA 3.5s ease-in-out infinite;
}
/* طبقة نجوم أصغر وكثيرة */
body.bg-stars::after{
  background-size: 600px 600px;
  background-image:
    radial-gradient(1.2px 1.2px at 40px 40px, rgba(255,255,255,.85) 50%, transparent 52%),
    radial-gradient(1px 1px at 180px 120px, rgba(255,255,255,.7) 50%, transparent 52%),
    radial-gradient(1px 1px at 320px 220px, rgba(255,255,255,.75) 50%, transparent 52%),
    radial-gradient(1.4px 1.4px at 500px 300px, rgba(255,255,255,.8) 50%, transparent 52%),
    radial-gradient(1px 1px at 620px 420px, rgba(255,255,255,.7) 50%, transparent 52%);
  animation: twinkleB 4.2s ease-in-out infinite;
}

@keyframes twinkleA{
  0%,100%{opacity:.85; transform:translateY(0)}
  50%   {opacity:.55; transform:translateY(-0.5px)}
}
@keyframes twinkleB{
  0%,100%{opacity:.8; transform:translateY(0)}
  50%   {opacity:.45; transform:translateY(.5px)}
}

/* الصندوق الرئيسي يصبح زجاجياً شفافاً لتظهر النجوم من خلفه */
.controlCard, .playerCard, .panel, .card {
  background: rgba(25,25,25,0.38);          /* شفافية بدلاً من الرمادي المصمت */
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 16px 40px rgba(0,0,0,0.45);
  backdrop-filter: blur(10px) saturate(120%);
  -webkit-backdrop-filter: blur(10px) saturate(120%);
}

/* تأكيد طبقات الواجهة فوق النجوم */
.header, main, footer, .controlCard, .playerCard, .panel, .card, .accordion {
  position: relative;
  z-index: 1;
}

/* تباين النص فوق الخلفية */
body.bg-stars .title, body.bg-stars h1, body.bg-stars h2, body.bg-stars .sub {
  text-shadow: 0 1px 2px rgba(0,0,0,.6);
}

/* احترام تقليل الحركة */
@media (prefers-reduced-motion: reduce){
  body.bg-stars::before, body.bg-stars::after{ animation: none; }
}

/* ===========================
   Quran Sleep — styles.css (rev2)
   ثيم ذهبي/أسود + نجوم كثيفة + بطاقات زجاجية
   =========================== */

/* متغيرات */
:root{
  --bg:#000;
  --text:#f3f3f3;
  --muted:#c8c8c8;
  --accent:#e5c052;
  --accent-2:#ffdf7e;
  --card-r:18px;
}

/* أساسيات */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:var(--bg);color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Kufi Arabic",Tahoma,Arial,sans-serif;
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
}
a{color:inherit;text-decoration:none}
button{font:inherit;cursor:pointer}
input,select{font:inherit}
h1,h2,h3{margin:0 0 8px;line-height:1.25}
.gold{color:var(--accent)}
.sub{opacity:.85}

/* احترام المناطق الآمنة */
.topbar{padding-top:calc(12px + env(safe-area-inset-top))}
.centerWrap{padding-left:max(16px,env(safe-area-inset-left));padding-right:max(16px,env(safe-area-inset-right))}

/* بطاقات زجاجية */
.card,.playerCard,.panel,.controlCard,.accordion{
  background:rgba(25,25,25,.38);
  border:1px solid rgba(255,255,255,.12);
  border-radius:var(--card-r);
  box-shadow:0 16px 40px rgba(0,0,0,.45);
  backdrop-filter:blur(10px) saturate(120%);
  -webkit-backdrop-filter:blur(10px) saturate(120%);
}

/* أزرار */
.btn{
  display:inline-flex;align-items:center;justify-content:center;
  gap:8px;border-radius:14px;border:1px solid rgba(255,255,255,.14);
  padding:12px 18px;background:rgba(255,255,255,.05);color:var(--text)
}
.btn.primary{background:linear-gradient(180deg,var(--accent-2),var(--accent));color:#242016;border:none}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,.18)}
.btn.circle{width:56px;height:56px;border-radius:50%}
.btn.icon{width:54px;height:54px;border-radius:14px}
.btn:active{transform:translateY(1px)}

/* منزلقات */
input[type="range"]{
  -webkit-appearance:none;appearance:none;width:100%;height:6px;
  background:linear-gradient(90deg,var(--accent) 0%,rgba(255,255,255,.12) 0%);
  border-radius:999px;outline:0
}
input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none;appearance:none;width:22px;height:22px;border-radius:50%;
  background:var(--accent);box-shadow:0 0 0 6px rgba(229,192,82,.15);border:1px solid rgba(0,0,0,.35)
}
input[type="range"]::-moz-range-thumb{
  width:22px;height:22px;border-radius:50%;background:var(--accent);border:none}

/* سويتش */
.switch{position:relative;width:84px;height:40px;border-radius:999px;background:#111;border:1px solid rgba(255,255,255,.12);padding:4px}
.switch .knob{width:32px;height:32px;border-radius:50%;background:var(--accent);box-shadow:0 0 0 10px rgba(229,192,82,.12);position:relative;left:0;transition:left .18s ease}
.switch input:checked + .knob, .switch.on .knob{left:44px}

/* قوائم */
.listBtn{
  display:flex;align-items:center;justify-content:space-between;
  padding:16px 18px;border-radius:14px;border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.04);margin:10px 0;color:var(--text);width:100%;
}
.listBtn.active{outline:2px solid var(--accent)}

/* أكوردون */
.accordion{overflow:hidden}
.accordion .content{max-height:0;transition:max-height .25s ease}
.accordion.open .content{max-height:1000px}

/* تخطيطات */
.container{max-width:820px;margin:0 auto;padding:24px 18px}
.playerCard{padding:22px}
.controls{display:flex;align-items:center;justify-content:center;gap:14px;margin:16px 0}
.timeRow{display:flex;align-items:center;justify-content:space-between;margin:6px 0 12px}
.row{display:flex;align-items:center;justify-content:space-between;gap:14px}
.grid{display:grid;gap:14px}
.header{text-align:center}
.logoWrap{display:flex;justify-content:center;margin:10px 0 6px}

/* القمر */
.moon{width:92px;height:92px;border-radius:50%;
  background:
    radial-gradient(60% 60% at 60% 40%, rgba(255,255,180,.25), transparent 60%),
    radial-gradient(60% 60% at 50% 50%, rgba(0,0,0,.85) 54%, transparent 56%),
    radial-gradient(60% 60% at 45% 50%, var(--accent) 54%, transparent 56%);
  box-shadow:0 0 80px rgba(229,192,82,.20) inset, 0 0 40px rgba(229,192,82,.22)
}

/* إخفاء أجزاء سطح المكتب على الهاتف */
@media (max-width: 480px){ .desktopOnly{display:none !important} }

/* ===== خلفية نجوم كثيفة + وميض ===== */
body.bg-stars{background:#000;position:relative;overflow-x:hidden}

/* طبقة 1: نجوم دقيقة جداً بكثافة عالية */
body.bg-stars::before{
  content:"";position:fixed;inset:0;z-index:0;pointer-events:none;mix-blend-mode:screen;
  background-repeat:repeat;
  background-image:
    radial-gradient(2px 2px at 10px 20px, rgba(255,255,255,.9) 50%, transparent 52%),
    radial-gradient(2px 2px at 50px 80px, rgba(255,255,200,.85) 50%, transparent 52%),
    radial-gradient(2px 2px at 100px 150px, rgba(255,255,255,.85) 50%, transparent 52%),
    radial-gradient(2px 2px at 200px 60px, rgba(255,240,180,.9) 50%, transparent 52%),
    radial-gradient(2px 2px at 300px 200px, rgba(255,255,230,.9) 50%, transparent 52%);
  background-size:180px 180px;
  opacity:.9; animation:twinkleA 3s infinite alternate;
}

/* طبقة 2: نجوم متوسطة */
body.bg-stars::after{
  content:"";position:fixed;inset:0;z-index:0;pointer-events:none;mix-blend-mode:screen;
  background-repeat:repeat;
  background-image:
    radial-gradient(1.6px 1.6px at 30px 20px, rgba(255,240,180,.9) 50%, transparent 52%),
    radial-gradient(1.4px 1.4px at 120px 140px, rgba(255,255,220,.85) 50%, transparent 52%),
    radial-gradient(1.8px 1.8px at 200px 80px, rgba(255,230,140,.9) 50%, transparent 52%),
    radial-gradient(1.6px 1.6px at 260px 190px, rgba(255,245,190,.85) 50%, transparent 52%),
    radial-gradient(1.4px 1.4px at 10px 210px, rgba(255,255,255,.8) 50%, transparent 52%);
  background-size:260px 260px;
  opacity:.8; animation:twinkleB 4.2s ease-in-out infinite;
}

/* طبقة 3: نجوم كبيرة متوهجة داخل عنصر مساعد */
.stars-extra{
  position:fixed;inset:0;z-index:0;pointer-events:none;mix-blend-mode:screen;
  background-repeat:repeat;
  background-image:
    radial-gradient(3px 3px at 50px 50px, rgba(255,255,210,1) 55%, transparent 57%),
    radial-gradient(3px 3px at 160px 120px, rgba(255,238,170,1) 55%, transparent 57%),
    radial-gradient(3px 3px at 270px 200px, rgba(255,255,230,1) 55%, transparent 57%),
    radial-gradient(3px 3px at 20px 160px, rgba(255,246,190,1) 55%, transparent 57%),
    radial-gradient(3px 3px at 220px 30px, rgba(255,255,210,1) 55%, transparent 57%);
  background-size:340px 340px;
  opacity:.65; animation:twinkleC 5.2s ease-in-out infinite;
}

@keyframes twinkleA{0%,100%{opacity:.9;transform:translateY(0)}50%{opacity:.5;transform:translateY(-.6px)}}
@keyframes twinkleB{0%,100%{opacity:.8;transform:translateY(0)}50%{opacity:.45;transform:translateY(.6px)}}
@keyframes twinkleC{0%,100%{opacity:.65;transform:translateY(0)}50%{opacity:.3;transform:translateY(-1px)}}

/* رفع طبقات الواجهة فوق النجوم */
.header, main, footer, .playerCard, .panel, .card, .accordion, .topbar, .installFab{position:relative;z-index:1}

/* تقليل الحركة */
@media (prefers-reduced-motion: reduce){
  body.bg-stars::before, body.bg-stars::after, .stars-extra{animation:none}
}

/* توحيد مظهر عناصر النماذج */
select, option, .listBtn, .switch, button{
  background:rgba(20,20,20,.85) !important;
  color:var(--text) !important;
  border:1px solid rgba(229,192,82,.5) !important;
  border-radius:12px !important;
  padding:10px 14px !important;
  font-size:1rem !important;
}
option:checked{background:var(--accent);color:#111 !important}
input[type="checkbox"]{accent-color:var(--accent);transform:scale(1.15)}
button,select,option{font-family:"Noto Kufi Arabic",Arial,sans-serif !important}

/* أزرار عائمة */
.installFab .btn.circle{
  width:54px;height:54px;background:radial-gradient(circle at 30% 30%, var(--accent-2), var(--accent));
  box-shadow:0 10px 30px rgba(229,192,82,.25);
}
.settingsFab{
  position:fixed;left:calc(16px + env(safe-area-inset-left));top:calc(70px + env(safe-area-inset-top));
  z-index:30;width:46px;height:46px;border-radius:50%;border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.06);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);color:var(--text)
}

/* المودال */
.modal{position:fixed;inset:0;display:none;background:rgba(0,0,0,.45);z-index:40;align-items:center}
.modal.show{display:flex}
